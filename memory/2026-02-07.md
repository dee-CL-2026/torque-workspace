# 2026-02-07

## Early Morning Session (05:20 - 06:30+)

### Context
Dee returned from wedding breakfast that ran all day → post-work drinks with Sinead → 5am catchup session to address the core problem: I keep saying I'll do things but don't actually finish them.

---

## The Core Problem Identified

**Pattern:** 
1. Dee asks me to do X
2. I say "I'll do X" 
3. Session compacts or ends
4. No record of X anywhere
5. Next session, I have no idea

**Root cause:** No persistent task tracking. "Mental notes" don't survive.

---

## What We Built Tonight

### 1. Task System

**tasks.md** — Active tasks only
- Table format: Task | Assigned | Status | Added | Notes
- Statuses: pending → in-progress → blocked → done
- Assignees: Dee, Torque, sub-agents (gas-dev, frontend, analyst, etc.), human staff

**tasks-done.md** — Archive for completed tasks
- Keeps tasks.md lean
- Provides history trail

### 2. HEARTBEAT.md Redesign

Changed from "check one low-value thing" to actual orchestration:

1. Check tasks.md
2. Assign unassigned tasks (from team/TEAM.md roster)
3. Torque tasks → start directly (or spawn torque-worker)
4. Sub-agent tasks → spawn, note session label in Notes
5. Human/Dee tasks → leave pending
6. In-progress sub-agents → check via sessions_list
7. Done → move to tasks-done.md
8. Check vault/inbox for new items (with duplicate checking)

### 3. 5-Minute Heartbeat (Test Mode)

Changed from 30m to 5m for rapid testing. **Remember to change back after testing.**

---

## Tasks Captured (17 total)

From vault/inbox/Torque Catchup files:

**Assigned to Dee (7):**
- Send 2024-2025 financial data to Anders
- Ask Ryan for pitch deck + 3 marketing scenarios
- Follow up: Teddy (KKS), PKF (Cheryl), Jules (zero cap accounts)
- Push SKD for sales data
- Get Ferry involved in all groups
- Get Finns co-branding contract

**Assigned to Torque (4):**
- Budget draft (Anders call) — IN PROGRESS
- Connect Google calendar
- Connect Outlook calendar
- Process YouTube watchlist (7 videos)

**Assigned to Sub-agents (5):**
- Build SKU library → gas-dev
- Candid Labs tiered/fork → gas-dev
- Command Centre improvements → frontend
- Candid Daily Cockpit dashboard → frontend
- Metric to raw data mapping → analyst ✅ COMPLETED

---

## Sub-agent Spawning Issue

Spawned 5 agents at once → all hit Gemini free tier rate limit (5 req/min)

**Error:** `generate_content_free_tier_requests limit: 5`

**Fix:** Use haiku instead of flash for sub-agents. Dee has Claude Max ($100) so no cost concern.

**Analyst task succeeded** because it used Anthropic model (not Gemini).

---

## Key Architectural Insight

**Torque should be pure orchestrator, not worker.**

If I do work directly:
- Blocked from responding to Dee
- Can't orchestrate anything else
- Single-threaded

If I only orchestrate + spawn:
- Stay responsive
- Multiple sub-agents work in parallel
- Just check status, route work, report back

**Possible rule:** Quick tasks (< 2 min) do directly. Anything substantial → spawn `torque-worker`.

---

## Team Roster Exists

Found yesterday's work at `team/TEAM.md`:
- Full org structure with roles
- Models specified per role
- Spawn patterns documented

Also: `team/wa-monitor.md` job description exists.

---

## Files Created/Modified

- `tasks.md` — created with 17 tasks
- `tasks-done.md` — created as archive
- `HEARTBEAT.md` — completely rewritten
- `candid/METRIC-DATA-MAPPING.md` — created by analyst sub-agent

---

## Config Changes

- Heartbeat interval: 30m → 5m (TEST MODE)

---

## Still TODO

- [ ] Change heartbeat back to 30m after testing
- [ ] Update team/TEAM.md to use haiku instead of flash
- [ ] Retry failed sub-agent tasks with haiku
- [ ] Consider torque-worker sub-agent for deep work
- [ ] Fix Gemini auth (hitting free tier, not paid subscription)

---

## Key Quote from Dee

> "We have said that a lot, let's make sure it sticks this time!"

The difference this time: actually built the system, tested it, identified failure modes (Gemini rate limits), have clear rules in HEARTBEAT.md.

---

*Session ongoing — compaction triggered*

---

## Mid-Morning Session (11:00 - 12:00)

### The Crash (~43 minutes downtime)

**What happened:** Torque went completely unresponsive on both WhatsApp and Telegram.

**Root cause:** Model switch to Sonnet broke auth. Error: `No API provider registered for api: undefined`

**The fix (Dee had to do manually):**
1. `claude setup-token` — generates OAuth token for MAX subscription
2. `openclaw config` → Model section → "Anthropic token (paste setup-token)"
3. Paste token, restart gateway

**Lesson:** Don't use `/model` or `session_status(model=...)` to switch models — can corrupt auth.

---

### CRITICAL DISCOVERY: MAX Subscription Model Limits

**MAX subscription OAuth token ONLY authorizes Opus for API use.**

- Claude.ai UI → can switch between Opus/Sonnet/Haiku freely
- API via OAuth → **ONLY Opus works**

Tested:
- `anthropic/claude-sonnet-4` → `model not allowed`
- `anthropic/claude-haiku-3-5` → `model not allowed`
- `google/gemini-2.5-flash` → `model not allowed`

When subagent spawn returns `modelApplied: false` with warning, it falls back to Opus. But Sonnet/Haiku outright fail with "No API provider" error.

---

### Subagents Now Working (But Expensive)

After fixing auth:
- Subagents execute successfully
- BUT they all run on Opus (expensive)
- Config has Sonnet/Haiku in `agents.defaults.models` but OAuth won't allow them

**Current state:** Subagents work, but burn Opus credits same as main session.

---

### Next Step: Discord Question

Dee joined OpenClaw Discord ("Friends of the Crustacean" - 76k members).

**Question to ask in #help:**
> Using MAX subscription with OAuth. Main session works on Opus, but subagents need cheaper models (Haiku/Sonnet). MAX OAuth only allows Opus. How to add separate pay-per-use API key just for subagents?

---

### Config Chaos Today

Multiple config breaks from my edits:
1. Added `token` to wrong location in auth.profiles
2. Telegram briefly showed "not configured"
3. Had to restore from `~/.openclaw/openclaw.json.bak`
4. Dee had to run auth wizard twice

**Lesson:** Stop touching auth config manually. Use `openclaw config` wizard.

---

### Files Modified
- Config fixed via wizard (multiple times)
- `agents.defaults.subagents.model` → changed to `anthropic/claude-opus-4-5` (only option that works)
- `agents.defaults.models` → added Sonnet/Haiku aliases (but they don't work with MAX OAuth)

---

### Key Decisions
- **Opus-only for now** until Discord provides solution
- **Don't touch model/auth config** without explicit permission
- **After config changes, confirm "Done. Ready."** so Dee knows

---

## Afternoon Session (12:00 - 13:00+)

### Mission Control Guide Discovery

Dee found viral Twitter thread by @pbteja1998 (Bhanu Teja P) — "The Complete Guide to Building Mission Control: How We Built an AI Agent Squad"
- 3.7M views, 31K bookmarks
- 10 autonomous OpenClaw agents working as a team
- Exactly the blueprint we need

**Key learnings:**
1. **Session keys = agent identity** (`agent:main:main`, `agent:developer:main`, etc.)
2. **Staggered heartbeats** — agents wake 2 min apart to avoid overlap
3. **WORKING.md** — Current task state, read FIRST on wake (we were missing this!)
4. **Daily standup** — Automated summary at end of day
5. **Cheaper models for routine work** — "Heartbeats don't need expensive models"

Full guide saved to: `docs/reference/mission-control-guide.md`

### Prep Work (Dee at BBQ)

Created while Dee out:
- `memory/WORKING.md` — current task state file
- `docs/reference/daily-standup-cron.md` — draft cron config
- `docs/reference/config-patch-subagents.json` — config template with placeholders
- Cleaned duplicate Brave Search task
- Added "Get Anthropic API key" task

### The Unlock Path (Confirmed)

1. Get pay-per-use API key from console.anthropic.com
2. Add as `anthropic:subagents` auth profile
3. Point subagents to Haiku via that profile
4. Test spawn

**Blocker:** Waiting on Dee to grab API key (at family BBQ)

### Browser Relay Discovery

I mentioned Browser Relay (Chrome extension for tab control) — should have surfaced this earlier for Telegram export etc. Lesson: lead with laziest path first.

---

*Afternoon session — BBQ intermission*
