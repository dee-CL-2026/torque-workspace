# 2026-02-08 Evening Session Notes

## Major Changes Made

### Brain Not Hands Rule (CRITICAL)
- Torque ONLY talks to Dee and spawns sub-agents. NO file edits, commands, searches directly.
- Written into SOUL.md and HEARTBEAT.md
- Override system: Dee explicitly approves specific actions when needed
- This was enforced after repeated violations of burning Opus tokens on mechanical tasks

### Heartbeat Rewrite
- HEARTBEAT.md stripped to ~60 lines (was ~120)
- Three jobs only: check if in conversation, morning briefing (delegated to PA), health check (context % + stale blockers)
- Cost discipline rules: max 30s Opus per heartbeat, never poll commands, one spawn max

### 12 Agent Crons Disabled
- All hourly agent heartbeats (pa, analyst, gas-dev, frontend, data-eng, finance, hr-ga, sales-ops, marketing, customer-success, ops, product) were disabled by Dee
- They were reading empty task files and blocking Torque's queue
- Remaining active crons: secretary triage (30min), TG export (22:00), TG digest (22:15), daily standup (23:00), main heartbeat (15min)

### Task System Restructured
- Deleted all per-agent task files (team/tasks/*.md)
- Single tasks.md at workspace root — single source of truth
- IDs: T001-T044 (40 active), 50 done in tasks-done.md, ~50 ideas in backlog.md
- Agents filter by their name in Assigned column
- Staff vs Consultant split in TEAM.md

### Telegram Export Fully Processed
- 20K lines split into 11 chunks (2K lines each)
- Each chunk processed by Gemini sub-agent → findings files
- Merged into tasks.md, tasks-done.md, backlog.md
- Pattern learned: Gemini often processes but fails to write files. Fix: explicit "WRITE THE FILE, confirm by reading back" instructions
- 11 parallel spawns caused rate limiting — stagger in future

### Command Centre Dashboard Rebuilt
- Frontend agent (Codex) rebuilt command-centre/ to wire into new tasks.md
- Live at torque-works.pages.dev
- Shows: task counts by status, assignee breakdown, staff/consultant roster, raw file links, recently done, rate limit HUD, system status
- Layout needs work: dead space, cramped columns, needs scroll/filter

### Docs-Bot Agent Created
- team/agents/docs-bot.md — documentation-only agent
- Runs on Gemini Flash, reads OC docs from npm install path
- Confirmed sub-agents can access /home/dieterwerwath/.config/nvm/versions/node/v22.22.0/lib/node_modules/openclaw/docs/

### Git Auth Fixed Post-Powerwash
- Installed gh CLI, authenticated via browser
- Remote switched to HTTPS (SSH key lost in powerwash)
- .gitignore updated: tmp/, vault/inbox exports, data/api-keys.md
- Sensitive files removed from git tracking

## Key Decisions
- Torque's heartbeat may not be needed long-term — most work handled by secretary/ops/PA crons on Gemini
- Supervisor pattern: Gemini ops agent monitors health, escalates to Torque (Opus) only for decisions
- Scale back to 3-4 permanent agents (secretary, ops, PA) + on-demand consultants
- Bhanu's lesson: "I went from 1 to 10 agents too fast. Better to get 2-3 solid first."
- Default file viewing = GitHub web UI (Dee often mobile)
- Obsidian deprioritized — use VS Code at desk, GitHub on mobile

## New Tasks Added
- T043: Cloudflare Tunnel for remote SSH (ops, needs TSLC domain)
- T044: Mobile terminal access (ops, blocked on T043)

## Gemini Sub-Agent Patterns Learned
- Often generates content but fails to call write tool → always add "WRITE THE FILE. Confirm by reading first 3 lines"
- 11 parallel spawns = rate limited → stagger, max 3-4 concurrent
- "No output" doesn't mean nothing happened — check disk
- Gemini writes scripts instead of doing work → say "DO NOT write scripts. Make changes directly"
- Large merge tasks fail → break into batches of 3-4 files

## Session Stats
- Context at ~60k/200k (30%) at start of evening
- Massive sub-agent usage: ~40+ spawns this session, all Gemini/Codex, ~$0.00
- Dashboard spec, task restructure, TG processing, git cleanup all done via sub-agents
