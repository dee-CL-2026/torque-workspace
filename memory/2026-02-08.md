# Memory for 2026-02-08

## Key Events & Decisions:

- **Frontend agent completed Command Centre v2 upgrade:** All features implemented (project filter, task cards, assignee counts, backlog panel, activity feed placeholder, layout improvements). Changes pushed to GitHub.
- **Image Analysis Issues:**
    - Claude image model hitting rate limits.
    - GPT-5-mini image model requires organization verification.
    - Tasks T053 and T054 created for investigation.
- **Command Centre "Update All" Button:** Remains in backlog, requires backend component (Cloudflare Worker/API endpoint) to trigger data regeneration and Git push. Dashboard is updated by daily midnight cron (which can be force-run).
- **WhatsApp "Football Bets" Group Integration:**
    - Initial attempts to retrieve JID by sending messages or forwarding failed due to WhatsApp API/OpenClaw limitations.
    - JID `447538126638-1491034227@g.us` successfully obtained by Dee tailing gateway logs while sending a message in the group.
    - Group initially configured in `TOOLS.md` and `openclaw.json` (via `gateway config.patch`) to "Listen to all".
    - Later changed to "requireMention: true" (respond only when mentioned as "T" or "AI").
    - Each config change required a `gateway restart`.
    - Torque successfully reacted/replied in the group after final config.
    - Task added to backlog to investigate improved WhatsApp group discovery.
- **Model Usage and Cost Strategy:**
    - Dee clarified that Claude Opus top-ups are possible, correcting Torque's outdated understanding.
    - Decision: Continue using Claude Opus for the main session, with Dee managing top-ups.
    - `google/gemini-2.5-flash` confirmed unreliable for precise file writes based on test failures.
    - `openai/gpt-5.2-codex` selected as preferred model for file-intensive writing and code-like tasks due to higher reliability.
    - Discussed multi-step approach: Gemini Pro for planning/research, Codex/GPT for precise writing.
- **`tasks.md` Integrity Issues:**
    - `tasks.md` was accidentally overwritten multiple times by Torque (e.g., when adding T053/T054, and later T055-T062), losing previously defined tasks (T001-T052).
    - File content was successfully restored from git. This highlighted a critical vulnerability in task management and the need for robust automated updates.
- **Workflow Infrastructure Upgrade (Retry with Codex):**
    - Initial attempt with Gemini Flash failed to execute file writes (classic Gemini write failure, no output).
    - Retried successfully using `openai/gpt-5.2-codex`:
        - Created `data/activity-log.json` (initial empty array).
        - Appended mandatory activity logging instructions (Python script for `activity-log.json` updates) to *all 14* agent job descriptions.
        - Updated secretary's `Core Responsibilities`: now includes consuming `activity-log.json` for task status updates, moving done tasks to `tasks-done.md`, and regenerating `dash-metrics.json`.
        - Re-ran and completed **T042 Cloudflare Tunnel research** successfully.
- **Critical Issue: Activity Log Not Populated:**
    - Despite agent instructions being updated by Codex, the `activity-log.json` remained empty after subsequent task completions (T057, T015, T029, T038, T042). This indicates agents are not reliably executing the Python logging script as part of their completion routine.
    - This blockage prevents automated `tasks.md` updates and accurate dashboard reflections.
- **Manual Task Status Updates Initiated:** Due to the `activity-log.json` failure, Torque is manually updating `tasks.md` for completed tasks (T018, T029, T038, T042, T053, T057) and then regenerating `dash-metrics.json`. This process is currently underway.
- **Task ID Mismatch Noted:** T015 in `tasks.md` ("Create YouTube playlist") did not match the `sessions_spawn` task "Connect Google Calendar" (research completed by Analyst). T018 in `tasks.md` was identified as the appropriate task to update for Google Calendar research. T057 was a new task spawned, not in `tasks.md` before this run.
- **Test Task Staggering:** Initial tasks (T057, T015) were spawned directly by Torque. Remaining 3 tasks (T029, T038, T042) were scheduled as one-shot crons, 2 minutes apart, to conserve Opus.
- **Daryl's Family Info:** Dee's brother Daryl (born 20 Feb 1983), wife Rhiannon, children Emmy (~mid-Aug 2014) and Jordan (~2017).

## Lessons Learned:

- **WhatsApp JID Discovery:** The current automated process is unreliable. Tailing logs is the most robust method with manual intervention. A dedicated task is in backlog for improvement.
- **Configuration Management:** Distinguish carefully between `TOOLS.md` (personal notes) and `openclaw.json` (actual gateway configuration). Changes to `openclaw.json` via `gateway config.patch` require a `gateway restart`.
- **Model Specialization:** `google/gemini-2.5-flash` is unreliable for precise file writing and complex structured text manipulation. `openai/gpt-5.2-codex` is significantly better for these "code-like" tasks. A multi-model "plan (Gemini Pro) then write (Codex)" approach may be optimal.
- **Task Tracking Workflow:** The proposed `activity-log.json` mechanism is critical but failing due to sub-agents not executing the logging command. This is a high-priority bug in the workflow infrastructure.
- **Redundant Task IDs:** Ensure task IDs in `sessions_spawn` prompts precisely match those in `tasks.md` to avoid confusion and manual correction.
- **Opus Token Conservation:** Actively monitor and strategically use cheaper models (Gemini Flash/Pro, Codex) for sub-agent tasks to preserve Opus budget, especially before refresh cycles.
- **Responsiveness is Key:** Dee expects immediate acknowledgement and action (reactions or replies) for every message. Silence is perceived as offline.

## To-Dos:

- **Immediate:** Complete manual update of `tasks.md` and `tasks-done.md` for T018, T029, T038, T042, T053, T057, then regenerate `dash-metrics.json`.
- **High Priority:** Investigate why agents are not executing the `python3 -c` command to update `data/activity-log.json` upon task completion. This breaks the new workflow.
- T053: Investigate Claude image model rate limit.
- T054: Investigate GPT-5-mini organization verification error.
- T057: Create `setup.sh` recovery script (completed, needs logging fix).
- T015: Connect Google Calendar (research done, next: Dee's interactive auth).
- T029: Build nightly Telegram export digest template (completed, needs logging fix).
- T038: Create agent roster reference doc (TEAM.md) (completed, needs logging fix).
- T042: Research Cloudflare Tunnel setup (completed, needs logging fix).
- Continue with full force task test (once logging is fixed and `tasks.md` is accurate).
- Prioritisation logic for secretary.
- Automate WhatsApp group discovery/whitelisting.

